<h1><%= article && article.id ? "Modifier un article" : "Créer un article" %></h1>

<form action="/articles/action" method="POST" enctype="multipart/form-data">
  <% if (article && article.id) { %>
    <input type="hidden" name="id" value="<%= article.id %>">
  <% } %>

  <div>
    <label for="titre">Titre :</label>
    <input type="text" name="titre" id="titre" value="<%= article?.titre || '' %>" required>
  </div>

  <div>
    <label for="description">Description :</label>
    <textarea name="description" id="description" required><%= article?.description || '' %></textarea>
  </div>

  <div>
    <label for="prix">Prix (€) :</label>
    <input type="number" step="0.01" name="prix" id="prix" value="<%= article?.prix || '' %>" required>
  </div>

  <div>
    <label for="type_id">Type :</label>
    <select name="type_id" id="type_id" required>
      <% types.forEach(type => { %>
        <option value="<%= type.id %>" <%= article?.type_id === type.id ? "selected" : "" %>><%= type.nom %></option>
      <% }) %>
    </select>
  </div>

  <div>
    <label for="image">Image :</label>
    <% if (article?.image) { %>
      <div>
        <img src="<%= article.image %>" alt="Image actuelle" style="max-width: 150px;"><br>
        <small>Changer l'image :</small>
      </div>
    <% } %>
    <input type="file" name="image" id="image" accept="image/*">
  </div>

  <button type="submit"><%= article?.id ? "Mettre à jour" : "Créer" %></button>
</form>
